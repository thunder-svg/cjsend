(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const b="https://<YOUR-WORKER>.workers.dev",A=10,c=(e,t=document)=>t.querySelector(e),h=e=>{const t=c("#toast");t.textContent=e,t.hidden=!1,setTimeout(()=>t.hidden=!0,3500)},k=e=>{if(!e)return null;const t=e.trim(),r=t.indexOf("#");if(r<1)return null;const o=t.slice(0,r).trim(),s=t.slice(r+1).trim();return/^[A-Za-z0-9]{2,5}$/.test(s)?{gameName:o,tagLine:s,riotId:`${o}#${s}`}:null},$=e=>(e*100).toFixed(1)+"%",i=(e,t=1)=>Number(e||0).toFixed(t);async function I(e,t,r=A){const o=new URL(b+"/v1/profile");o.searchParams.set("riotId",e),o.searchParams.set("platform",t),o.searchParams.set("count",String(r));const s=await fetch(o,{headers:{Accept:"application/json"}});if(!s.ok)throw new Error(`API ${s.status}`);return await s.json()}function l(e,t,r=""){return`<div class="kpi"><div class="val ${r}">${t}</div><div class="hint">${e}</div></div>`}function L(e){var p,d,m,f,u,w,y,g;const t=((p=e.recent)==null?void 0:p.summary)||{wins:0,losses:0,kills:0,deaths:0,assists:0,avgCS:0},r=t.wins+t.losses,o=r?$(t.wins/r):"0%",s=t.deaths?i((t.kills+t.assists)/t.deaths,2):"∞",n=(((m=(d=e.ranks)==null?void 0:d.solo)==null?void 0:m.tier)||"UNRANKED")+((u=(f=e.ranks)==null?void 0:f.solo)!=null&&u.rank?" "+e.ranks.solo.rank:""),a=((y=(w=e.ranks)==null?void 0:w.solo)==null?void 0:y.lp)!=null?`${e.ranks.solo.lp} LP`:"";return`
        <div class="card">
          <div class="title">${e.name||e.gameName} <span class="pill">${e.riotId}</span></div>
          <div class="kpis">
            ${l("솔로랭크",`${n} ${a}`)}
            ${l("레벨",((g=e.summoner)==null?void 0:g.summonerLevel)??"-")}
            ${l("승률",o,t.wins>=t.losses?"ok":"bad")}
            ${l("KDA",s)}
            ${l("평균 K",i(t.kills/r||0,1))}
            ${l("평균 D",i(t.deaths/r||0,1))}
            ${l("평균 A",i(t.assists/r||0,1))}
            ${l("평균 CS",i(t.avgCS||0,1))}
          </div>
        </div>`}function S(e,t){var m,f;const r=c("#result");r.innerHTML="",r.insertAdjacentHTML("beforeend",L(e)),r.insertAdjacentHTML("beforeend",L(t));const o=((m=e.recent)==null?void 0:m.summary)||{},s=((f=t.recent)==null?void 0:f.summary)||{},n=(o.wins||0)+(o.losses||0)||1,a=(s.wins||0)+(s.losses||0)||1,p=[["승률",$((o.wins||0)/n),$((s.wins||0)/a)],["KDA",o.deaths?i(((o.kills||0)+(o.assists||0))/o.deaths,2):"∞",s.deaths?i(((s.kills||0)+(s.assists||0))/s.deaths,2):"∞"],["평균 K/D/A",`${i((o.kills||0)/n,1)} / ${i((o.deaths||0)/n,1)} / ${i((o.assists||0)/n,1)}`,`${i((s.kills||0)/a,1)} / ${i((s.deaths||0)/a,1)} / ${i((s.assists||0)/a,1)}`],["평균 CS",i(o.avgCS||0,1),i(s.avgCS||0,1)],["표본 수",n,a]],d=document.createElement("div");d.className="card",d.innerHTML=`
        <div class="title">상세 비교</div>
        <table class="table">
          <thead><tr><th>지표</th><th>${e.riotId}</th><th>${t.riotId}</th></tr></thead>
          <tbody>
            ${p.map(u=>`<tr><td>${u[0]}</td><td>${u[1]}</td><td>${u[2]}</td></tr>`).join("")}
          </tbody>
        </table>`,document.querySelector(".wrap").appendChild(d)}async function v(){const e=k(c("#idA").value),t=k(c("#idB").value),r=c("#platform").value;if(!e||!t){h("두 Riot ID를 모두 입력하세요. 예: Faker#KR1");return}c("#compare").disabled=!0;try{const[o,s]=await Promise.all([I(e.riotId,r),I(t.riotId,r)]);S(o,s),history.replaceState(null,"",`#compare=${encodeURIComponent(e.riotId)}|${encodeURIComponent(t.riotId)}&p=${r}`)}catch(o){console.error(o),h("불러오기에 실패했습니다. 잠시 후 다시.")}finally{c("#compare").disabled=!1}}function C(){const e=location.hash.slice(1);if(!e.startsWith("compare="))return;const t=decodeURIComponent(e.split("=")[1].split("&")[0]||""),[r,o]=t.split("|"),s=new URLSearchParams(e.split("&").slice(1).join("&")).get("p")||"kr";r&&o&&(c("#idA").value=r,c("#idB").value=o,c("#platform").value=s,v())}document.addEventListener("click",e=>{const t=e.target.id;if(t==="compare"&&v(),t==="share")try{navigator.clipboard.writeText(location.href),h("링크를 복사했습니다")}catch{h("복사 실패")}});document.addEventListener("keydown",e=>{e.key==="Enter"&&v()});window.addEventListener("DOMContentLoaded",C);
